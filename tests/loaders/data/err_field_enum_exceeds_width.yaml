# doc: Test that enum member value exceeding field width raises a validation error.
# exception: ValidationError
# msg_match: Enumeration .* requires .* bits to represent, but field is .* bits wide
---
name: test_map
doc: Test map
address_width: 8
register_width: 32
offset: 0
items:
  - name: test_reg
    doc: Test register
    offset: 0
    fields:
      - name: field_enum_err
        doc: Field with invalid enum
        offset: 0
        width: 3 # Max value is 7 (0b111)
        access: ro
        hardware: f # Fixed hardware mode
        reset: null
        enum:
          name: error_codes
          doc: Error codes enumeration
          members:
            - name: ok
              doc: No error
              value: 0
            - name: timeout
              doc: Timeout error
              value: 1
            - name: overflow
              doc: Overflow error
              value: 8 # Requires 4 bits (0b1000), exceeds width=3
