{# MACROS #}
{#- generic range #}
{% macro range(msb, lsb) %}
    {% if msb == lsb %}
{{ msb }}
    {%- else %}
{{ msb }}:{{ lsb }}
    {%- endif %}
{%- endmacro %}

{#- value in hex format #}
{% macro literal(reset, width) %}
{{ "0x%0{w}x".format(w=width // 4) % reset }}
{%- endmacro %}

{#- TEMPLATE NAMESPACE #}
{% set tmp = namespace() %}

{#- TEMPLATE #}
[//]: # (DO NOT EDIT THIS AUTOGENERATED FILE. ALL CHANGES WILL BE LOST.)

# {{ cfg.title }}

{% if cfg.show_disclaimer %}
Generated by [Corsair](https://github.com/esynr3z/corsair) v{{ version }}.
{% endif %}

{% if cfg.show_conventions %}
## Conventions

| Access mode | Description |
| :--- | :--- |
| RW | Read and Write |
| RW1C | Read and Write 1 to Clear |
| RW1S | Read and Write 1 to Set |
| RO | Read Only |
| ROC | Read Only to Clear |
| ROLL | Read Only / Latch Low |
| ROLH | Read Only / Latch High |
| WO | Write only |
| WOSC | Write Only / Self Clear |
{% endif %}

{% if cfg.show_hardware_mode %}
| Hardware mode | Description |
| :--- | :--- |
| i | Use input value from hardware to update the field |
| o | Enable output value from the field to be accessed by hardware |
| c | Add signal to clear the field (fill with all zeros) |
| s | Add signal to set the field (fill with all ones) |
| e | Add signal to enable the field to capture input value (used with i) |
| l | Add signal to lock the field (to prevent any changes) |
| a | Add signals to notify when bus access to the field is performed (at the same cycle) |
| q | Add simple interface to external queue (LIFO, FIFO) |
| f | Enable fixed mode (field is a constant) |
| n | Not accessible by hardware |
{% endif %}

## Register map summary

**Base address:** {{ literal(regmap.base_address, regmap.address_width) }}

| Name | Offset | Description |
| :--- | :--- | :--- |
{% for reg in regmap.registers %}
| {{ "[%s](#%s)" % (reg.name.upper(), reg.name.lower()) }} | {{ literal(reg.address, regmap.address_width) }} | {{ reg.brief.rstrip(".") }} |
{% endfor %}
{% for reg in regmap.registers %}

## {{ reg.name.upper() }} - {{ reg.brief.rstrip(".") }}

**Address offset:** {{ literal(reg.address, regmap.address_width) }}

**Reset value:** 0x{{ reg.reset_hexstr.upper() }}

**Access mode:** {{ reg.access.value.upper() }}

    {% if reg.description %}

{{ reg.description }}
    {% endif %}

    {% if cfg.show_images %}
![{{ reg.name.lower()}}]({{ cfg.image_dir }}/{{regmap.name.lower()}}_{{ reg.name.lower()}}.svg)

    {% endif %}
| Name | Bits | Access {%- if cfg.show_hardware_mode %} | Hardware {%- endif %} | Reset | Description |
| :--- | :--- | :--- {%- if cfg.show_hardware_mode %} | :--- {%- endif %} | :--- | :--- |
    {% for bf in reg.fields_with_reserved[::-1] %}
| {{ "-" if bf.name.startswith("_reserved") else bf.name.upper() }} | {{ range(bf.msb, bf.lsb) }} | {{ bf.access.value.upper() }} {%- if cfg.show_hardware_mode %} | {{ bf.hardware.value.lower() }} {%- endif %} | {{ "X" if bf.reset == None else literal(bf.reset, bf.width) }} | {{ bf.doc | replace('\n', '<br>')  }} |
    {% endfor %}

    {% for bf in reg.fields %}
        {% if bf.enum %}

Enumerated values for {{ reg.name.upper() }}.{{ bf.name.upper() }}:

| Name | Value | Description |
| :--- | :--- | :--- |
            {% for member in bf.enum.members %}
| {{ member.name.upper() }} | {{ literal(member.value, bf.width) }} | {{ member.doc | replace('\n', '<br>') }} |
            {% endfor %}
        {% endif %}
    {% endfor %}
{% endfor %}